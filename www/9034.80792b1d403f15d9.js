"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9034],{9034:(U,m,u)=>{u.r(m),u.d(m,{ViajesPageModule:()=>M});var g=u(177),b=u(4341),s=u(4742),p=u(5171),d=u(467),e=u(4438),j=u(3207),f=u(5312),S=u(1626);let k=(()=>{var t;class i{constructor(r){this.http=r}obtenerViaje(r){var o=this;return(0,d.A)(function*(){try{const n={token:r};return yield(0,j.s)(o.http.get(`${f.c.apiUrl}/viaje/obtener`,{params:n}))}catch(n){throw console.error("Error al obtener los viajes:",n),n}})()}actualizarEstadoViaje(r,o,n){var c=this;return(0,d.A)(function*(){try{const l={id_viaje:r,estado:o,token:n};return yield(0,j.s)(c.http.post(`${f.c.apiUrl}/viaje/actualizar`,l))}catch(l){throw console.error("Error al actualizar el estado del viaje:",l),l}})()}}return(t=i).\u0275fac=function(r){return new(r||t)(e.KVO(S.Qq))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),i})();var P=u(8570);let F=(()=>{var t;class i{constructor(r,o,n){this.alertService=r,this.loaderController=o,this.toastController=n}showAlert(r,o){var n=this;return(0,d.A)(function*(){var c=yield n.alertService.create({cssClass:"",message:r,header:o,buttons:["Aceptar"]});return yield c.present(),c})()}showLoader(r){var o=this;return(0,d.A)(function*(){var n=yield o.loaderController.create({message:r,translucent:!0});return yield n.present(),n})()}showToast(r){var o=this;return(0,d.A)(function*(){yield(yield o.toastController.create({message:r,duration:3e3,icon:"logo-whatsapp"})).present()})()}showConfirm(r){var o=this;return(0,d.A)(function*(){return new Promise(function(){var c=(0,d.A)(function*(l,h){var v=yield o.alertService.create({message:r,header:"Advertencia",buttons:[{text:"Aceptar",handler:()=>{l(!0)}},{text:"Cancelar",handler:()=>{l(!1)}}]});yield v.present()});return function(l,h){return c.apply(this,arguments)}}())})()}}return(t=i).\u0275fac=function(r){return new(r||t)(e.KVO(s.hG),e.KVO(s.Xi),e.KVO(s.K_))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),i})();const V=(0,u(7464).F3)("Preferences",{web:()=>u.e(2924).then(u.bind(u,2924)).then(t=>new t.PreferencesWeb)}),y="llaveAplicacionUber";let I=(()=>{var t;class i{constructor(){}setItem(r,o){return(0,d.A)(function*(){yield V.set({key:r,value:o})})()}getItem(r){return(0,d.A)(function*(){return(yield V.get({key:r})).value})()}agregarToken(r){var o=this;return(0,d.A)(function*(){o.setItem(y,JSON.stringify(r))})()}obtenerStorage(){var r=this;return(0,d.A)(function*(){const o=yield r.getItem(y);return null==o?[]:JSON.parse(o)})()}}return(t=i).\u0275fac=function(r){return new(r||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),i})();function x(t,i){1&t&&(e.j41(0,"ion-list")(1,"ion-list-header")(2,"h3"),e.nrm(3,"ion-skeleton-text",5),e.k0s()(),e.j41(4,"ion-item")(5,"ion-thumbnail",6),e.nrm(6,"ion-skeleton-text",7),e.k0s(),e.j41(7,"ion-label")(8,"h3"),e.nrm(9,"ion-skeleton-text",8),e.k0s(),e.j41(10,"p"),e.nrm(11,"ion-skeleton-text",9),e.k0s(),e.j41(12,"p"),e.nrm(13,"ion-skeleton-text",10),e.k0s()()()()),2&t&&(e.R7$(3),e.Y8G("animated",!0),e.R7$(3),e.Y8G("animated",!0),e.R7$(3),e.Y8G("animated",!0),e.R7$(2),e.Y8G("animated",!0),e.R7$(2),e.Y8G("animated",!0))}function E(t,i){if(1&t){const a=e.RV6();e.j41(0,"ion-card",11),e.bIt("click",function(){const o=e.eBV(a).$implicit,n=e.XpG();return e.Njj(n.seleccionarViaje(o.id_usuario))}),e.j41(1,"div",12),e.nrm(2,"ion-img",13),e.k0s(),e.j41(3,"h3"),e.EFF(4),e.k0s(),e.j41(5,"h3"),e.EFF(6),e.k0s(),e.j41(7,"div",14)(8,"ion-label"),e.EFF(9),e.k0s(),e.j41(10,"ion-label"),e.EFF(11),e.k0s(),e.j41(12,"ion-label"),e.EFF(13),e.k0s(),e.j41(14,"ion-label"),e.EFF(15),e.k0s()()()}if(2&t){const a=i.$implicit;e.R7$(2),e.Y8G("src",a.imagen_vehiculo),e.R7$(2),e.SpI("Origen: ",a.ubicacion_origen,""),e.R7$(2),e.SpI("Destino: ",a.ubicacion_destino,""),e.R7$(3),e.SpI("Patente: ",a.patente,""),e.R7$(2),e.SpI("Color: ",a.color,""),e.R7$(2),e.SpI("Marca: ",a.marca,""),e.R7$(2),e.SpI("Modelo: ",a.modelo,"")}}const C=[{path:"",component:(()=>{var t;class i{constructor(r,o,n,c,l){this.router=r,this.viajeService=o,this.usuarioService=n,this.helper=c,this.storage=l,this.viajes=[],this.nuevoViaje="",this.loaded=!1,this.usuario=[],this.correo=""}ngOnInit(){this.cargarUsuario(),this.cargarViajes()}cargarViajes(){var r=this;return(0,d.A)(function*(){try{var o;r.loaded=!1;const c=null===(o=(yield r.storage.obtenerStorage())[0])||void 0===o?void 0:o.token;if(c){const l=yield r.viajeService.obtenerViaje(c);l&&l.data?r.viajes=l.data:r.helper.showAlert("No se encontraron viajes","Informaci\xf3n")}r.loaded=!0}catch(n){console.error("Error al cargar los viajes:",n),r.helper.showAlert("Error al cargar los viajes","Error"),r.loaded=!0}})()}cargarUsuario(){var r=this;return(0,d.A)(function*(){try{var o,n;const c=yield r.storage.obtenerStorage(),l=null===(o=c[0])||void 0===o?void 0:o.usuario_correo,h=null===(n=c[0])||void 0===n?void 0:n.token;if(l&&h){const v=yield r.usuarioService.obtenerUsuario({p_correo:l,token:h});v&&v.data?(r.usuario=v.data,console.log("Usuario cargado:",r.usuario)):r.helper.showAlert("No se encontraron datos del usuario","Informaci\xf3n")}else r.helper.showAlert("No se encontr\xf3 token o correo. Inicia sesi\xf3n nuevamente.","Error")}catch(c){console.error("Error al cargar el usuario:",c),r.helper.showAlert("Error al cargar el usuario","Error")}})()}agregarViaje(){this.nuevoViaje.trim().length>0?(this.viajes.push({ubicacion_origen:this.nuevoViaje,ubicacion_destino:"Destino predeterminado",patente:"PAT123",color:"Color predeterminado",marca:"Marca predeterminada",modelo:"Modelo predeterminado",imagen_vehiculo:"ruta/de/imagen.png"}),this.nuevoViaje=""):this.helper.showAlert("El campo de nuevo viaje est\xe1 vac\xedo","Advertencia")}seleccionarViaje(r){console.log(`Viaje seleccionado: ${r}`)}irlogin(){this.router.navigateByUrl("/inicio")}}return(t=i).\u0275fac=function(r){return new(r||t)(e.rXU(p.Ix),e.rXU(k),e.rXU(P.o),e.rXU(F),e.rXU(I))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-viajes"]],decls:9,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],[4,"ngIf"],["expand","full",3,"click"],[3,"click",4,"ngFor","ngForOf"],[2,"width","150px","height","30px",3,"animated"],["slot","start"],[3,"animated"],[2,"width","80%",3,"animated"],[2,"width","60%",3,"animated"],[2,"width","30%",3,"animated"],[3,"click"],[1,"box"],[3,"src"],[1,"vertical"]],template:function(r,o){1&r&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Viajes Disponibles"),e.k0s()()(),e.j41(4,"ion-content",1),e.DNE(5,x,14,5,"ion-list",2),e.j41(6,"ion-button",3),e.bIt("click",function(){return o.irlogin()}),e.EFF(7," Volver al Inicio "),e.k0s(),e.DNE(8,E,16,7,"ion-card",4),e.k0s()),2&r&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(),e.Y8G("ngIf",!o.loaded),e.R7$(3),e.Y8G("ngForOf",o.viajes))},dependencies:[g.Sq,g.bT,s.Jm,s.b_,s.W9,s.eU,s.KW,s.uz,s.he,s.nf,s.AF,s.ds,s.Zx,s.BC,s.ai],styles:['@charset "UTF-8";ion-button[_ngcontent-%COMP%]{margin-top:20px;margin-right:20px;margin-left:20px}ion-content[_ngcontent-%COMP%]{--background: url(/assets/img/rutas.jpg) no-repeat center center / cover}ion-list[_ngcontent-%COMP%]{background-color:#0009;padding:10px;border-radius:10px}ion-item[_ngcontent-%COMP%]{background-color:#fff3;margin-bottom:10px;color:#fff;border-radius:5px}ion-button[_ngcontent-%COMP%]{margin-top:20px;margin-right:20px;margin-left:20px;--background: rgba(15, 14, 14, .635);--color: rgb(149, 146, 146)}']}),i})()}];let R=(()=>{var t;class i{}return(t=i).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(C),p.iI]}),i})(),M=(()=>{var t;class i{}return(t=i).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,b.YN,s.bv,R]}),i})()}}]);