"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7971],{7971:(I,b,d)=>{d.r(b),d.d(b,{RegistroPageModule:()=>_});var w=d(177),v=d(4341),m=d(4742),P=d(5171),u=d(467),p=d(7464),f=function(i){return i.Prompt="PROMPT",i.Camera="CAMERA",i.Photos="PHOTOS",i}(f||{}),h=function(i){return i.Rear="REAR",i.Front="FRONT",i}(h||{}),y=function(i){return i.Uri="uri",i.Base64="base64",i.DataUrl="dataUrl",i}(y||{});class R extends p.E_{getPhoto(r){var s=this;return(0,u.A)(function*(){return new Promise(function(){var e=(0,u.A)(function*(t,n){if(r.webUseInput||r.source===f.Photos)s.fileInputExperience(r,t,n);else if(r.source===f.Prompt){let a=document.querySelector("pwa-action-sheet");a||(a=document.createElement("pwa-action-sheet"),document.body.appendChild(a)),a.header=r.promptLabelHeader||"Photo",a.cancelable=!1,a.options=[{title:r.promptLabelPhoto||"From Photos"},{title:r.promptLabelPicture||"Take Picture"}],a.addEventListener("onSelection",function(){var l=(0,u.A)(function*(c){0===c.detail?s.fileInputExperience(r,t,n):s.cameraExperience(r,t,n)});return function(c){return l.apply(this,arguments)}}())}else s.cameraExperience(r,t,n)});return function(t,n){return e.apply(this,arguments)}}())})()}pickImages(r){var s=this;return(0,u.A)(function*(){return new Promise(function(){var e=(0,u.A)(function*(t,n){s.multipleFileInputExperience(t,n)});return function(t,n){return e.apply(this,arguments)}}())})()}cameraExperience(r,s,e){var t=this;return(0,u.A)(function*(){if(customElements.get("pwa-camera-modal")){const n=document.createElement("pwa-camera-modal");n.facingMode=r.direction===h.Front?"user":"environment",document.body.appendChild(n);try{yield n.componentOnReady(),n.addEventListener("onPhoto",function(){var a=(0,u.A)(function*(l){const c=l.detail;null===c?e(new p.I9("User cancelled photos app")):c instanceof Error?e(c):s(yield t._getCameraPhoto(c,r)),n.dismiss(),document.body.removeChild(n)});return function(l){return a.apply(this,arguments)}}()),n.present()}catch{t.fileInputExperience(r,s,e)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),t.fileInputExperience(r,s,e)})()}fileInputExperience(r,s,e){let t=document.querySelector("#_capacitor-camera-input");const n=()=>{var a;null===(a=t.parentNode)||void 0===a||a.removeChild(t)};t||(t=document.createElement("input"),t.id="_capacitor-camera-input",t.type="file",t.hidden=!0,document.body.appendChild(t),t.addEventListener("change",a=>{const l=t.files[0];let c="jpeg";if("image/png"===l.type?c="png":"image/gif"===l.type&&(c="gif"),"dataUrl"===r.resultType||"base64"===r.resultType){const g=new FileReader;g.addEventListener("load",()=>{if("dataUrl"===r.resultType)s({dataUrl:g.result,format:c});else if("base64"===r.resultType){const L=g.result.split(",")[1];s({base64String:L,format:c})}n()}),g.readAsDataURL(l)}else s({webPath:URL.createObjectURL(l),format:c}),n()}),t.addEventListener("cancel",a=>{e(new p.I9("User cancelled photos app")),n()})),t.accept="image/*",t.capture=!0,r.source===f.Photos||r.source===f.Prompt?t.removeAttribute("capture"):r.direction===h.Front?t.capture="user":r.direction===h.Rear&&(t.capture="environment"),t.click()}multipleFileInputExperience(r,s){let e=document.querySelector("#_capacitor-camera-input-multiple");const t=()=>{var n;null===(n=e.parentNode)||void 0===n||n.removeChild(e)};e||(e=document.createElement("input"),e.id="_capacitor-camera-input-multiple",e.type="file",e.hidden=!0,e.multiple=!0,document.body.appendChild(e),e.addEventListener("change",n=>{const a=[];for(let l=0;l<e.files.length;l++){const c=e.files[l];let g="jpeg";"image/png"===c.type?g="png":"image/gif"===c.type&&(g="gif"),a.push({webPath:URL.createObjectURL(c),format:g})}r({photos:a}),t()}),e.addEventListener("cancel",n=>{s(new p.I9("User cancelled photos app")),t()})),e.accept="image/*",e.click()}_getCameraPhoto(r,s){return new Promise((e,t)=>{const n=new FileReader,a=r.type.split("/")[1];"uri"===s.resultType?e({webPath:URL.createObjectURL(r),format:a,saved:!1}):(n.readAsDataURL(r),n.onloadend=()=>{const l=n.result;e("dataUrl"===s.resultType?{dataUrl:l,format:a,saved:!1}:{base64String:l.split(",")[1],format:a,saved:!1})},n.onerror=l=>{t(l)})})}checkPermissions(){var r=this;return(0,u.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw r.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw r.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var r=this;return(0,u.A)(function*(){throw r.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var r=this;return(0,u.A)(function*(){throw r.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var r=this;return(0,u.A)(function*(){throw r.unavailable("Not implemented on web.")})()}}new R;const C=(0,p.F3)("Camera",{web:()=>new R});var o=d(4438),E=d(3656),U=d(1182),A=d(8570);const M=[{path:"",component:(()=>{var i;class r{constructor(e,t,n,a){this.navCtrl=e,this.afAuth=t,this.alertController=n,this.usuarioService=a,this.usuario="",this.contrasena="",this.nombre="",this.telefono=""}registro(){var e=this;return(0,u.A)(function*(){try{var t;const n=yield e.afAuth.createUserWithEmailAndPassword(e.usuario,e.contrasena);console.log("Usuario registrado en Firebase:",n.user);const a=yield null===(t=n.user)||void 0===t?void 0:t.getIdToken();if(a){const l=yield e.usuarioService.agregarUsuario({p_correo_electronico:e.usuario,p_nombre:e.nombre,p_telefono:e.telefono,token:a},e.imagen);console.log("Usuario agregado a la base de datos:",l)}e.mostrarAlerta("\xc9xito","Usuario registrado correctamente"),e.navCtrl.navigateForward("/login")}catch(n){console.error("Error al registrar:",n),e.mostrarAlerta("Error","No se pudo registrar el usuario")}})()}takePhoto(){var e=this;return(0,u.A)(function*(){const t=yield C.getPhoto({quality:90,allowEditing:!0,resultType:y.Uri});if(t.webPath){const a=yield(yield fetch(t.webPath)).blob();e.imagen={fname:"foto."+t.format,src:t.webPath,file:a}}})()}mostrarAlerta(e,t){var n=this;return(0,u.A)(function*(){yield(yield n.alertController.create({header:e,message:t,buttons:["OK"]})).present()})()}irlogin(){this.navCtrl.navigateForward("/login")}}return(i=r).\u0275fac=function(e){return new(e||i)(o.rXU(E.q9),o.rXU(U.DS),o.rXU(m.hG),o.rXU(A.o))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-registro"]],decls:15,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],[1,"box"],["label","Correo electr\xf3nico:","type","email",3,"ngModelChange","ngModel"],["type","password","label","Contrase\xf1a:",3,"ngModelChange","ngModel"],[3,"click"]],template:function(e,t){1&e&&(o.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),o.EFF(3,"Registro"),o.k0s()()(),o.j41(4,"ion-content",1)(5,"div",2)(6,"ion-list")(7,"ion-item")(8,"ion-input",3),o.mxI("ngModelChange",function(a){return o.DH7(t.usuario,a)||(t.usuario=a),a}),o.k0s()(),o.j41(9,"ion-item")(10,"ion-input",4),o.mxI("ngModelChange",function(a){return o.DH7(t.contrasena,a)||(t.contrasena=a),a}),o.k0s()()(),o.j41(11,"ion-button",5),o.bIt("click",function(){return t.registro()}),o.EFF(12,"Registrar"),o.k0s(),o.j41(13,"ion-button",5),o.bIt("click",function(){return t.irlogin()}),o.EFF(14,"Ir al Login"),o.k0s()()()),2&e&&(o.Y8G("translucent",!0),o.R7$(4),o.Y8G("fullscreen",!0),o.R7$(4),o.R50("ngModel",t.usuario),o.R7$(2),o.R50("ngModel",t.contrasena))},dependencies:[v.BC,v.vS,m.Jm,m.W9,m.eU,m.$w,m.uz,m.nf,m.BC,m.ai,m.Gw],styles:['@charset "UTF-8";.box[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;justify-content:center}ion-button[_ngcontent-%COMP%]{margin-top:20px;margin-right:20px;margin-left:20px;--background: rgba(15, 14, 14, .635);--color: rgb(149, 146, 146)}ion-content[_ngcontent-%COMP%]{--background: url(/assets/img/ruedaexotic.jpg) no-repeat center center / cover}']}),r})()}];let F=(()=>{var i;class r{}return(i=r).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[P.iI.forChild(M),P.iI]}),r})(),_=(()=>{var i;class r{}return(i=r).\u0275fac=function(e){return new(e||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[w.MD,v.YN,m.bv,F]}),r})()}}]);